# Variables de entorno para el orquestador Docker Compose

# Configuración SUPABASE
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_KEY=your-supabase-service-key
SUPABASE_BUCKET_NAME=wa_sessions
SUPABASE_BUCKET_URL=https://your-project.supabase.co/storage/v1/s3
SUPABASE_BUCKET_REGION=us-east-2

# Configuración de base de datos para servicios Rust
DATABASE_URL=postgresql://user:password@host:5432/postgres
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECT_TIMEOUT=30
DB_IDLE_TIMEOUT=600

# Configuración de Redis (Upstash)
REDIS_URL=redis://localhost:6379

# Configuración de OpenAI
OPENAI_API_KEY=your-openai-api-key

# Configuración de WhatsApp
WHATSAPP_HEADLESS=true
WHATSAPP_WINDOW_SIZE=1920,1080

# Configuración de AI
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=150
OPENAI_TEMPERATURE=0.7
AI_PROV_SEND_DIRECT=false
AVAILABILITY_TIMEOUT_SECONDS=60
AVAILABILITY_ACCEPT_GRACE_SECONDS=60

# Configuración de Embeddings (OpenAI)
EMBEDDINGS_ENABLED=true
EMBEDDINGS_MODEL=text-embedding-3-small
EMBEDDINGS_CACHE_TTL=3600
EMBEDDINGS_TIMEOUT=5

# Configuración de servicios para WhatsApp Services (Docker)
# WhatsApp Service Clientes
AI_SERVICE_CLIENTES_URL=http://ai-clientes:8001

# WhatsApp Service Proveedores
PROVEEDORES_AI_SERVICE_URL=http://ai-proveedores:8002

# URLs directas de los servicios de WhatsApp
WHATSAPP_CLIENTES_URL=http://wa-gateway:7000
WHATSAPP_PROVEEDORES_URL=http://wa-gateway:7000

# Configuración de puertos (esquema actualizado)
# Frontend y Dashboards (Node.js)
FRONTEND_SERVICE_PORT=5000

# Servicios WhatsApp (Node.js)
WHATSAPP_CLIENTES_PORT=5001
WHATSAPP_PROVEEDORES_PORT=5002

# Servicios AI (Python)
AI_SERVICE_CLIENTES_PORT=8001
AI_SERVICE_PROVEEDORES_PORT=8002
SEARCH_TOKEN_PORT=8000
SESSION_SERVICE_PORT=8004
API_GATEWAY_PORT=8003
MAX_SEARCH_RESULTS=20
DEFAULT_SEARCH_LIMIT=10
SEARCH_TIMEOUT_MS=5000
CACHE_TTL_SECONDS=300
SEARCH_API_HOST=0.0.0.0
SEARCH_API_PREFIX=/api/v1
SEARCH_METRICS_ENABLED=true
SEARCH_METRICS_PORT=9091

# Configuración Bot Clientes
CLIENTES_WHATSAPP_PORT=5001
CLIENTES_INSTANCE_NAME=TinkuBot Clientes
CLIENTES_INSTANCE_ID=bot-clientes
CLIENTES_WHATSAPP_NUMBER=+593998823053

# Configuración Bot Proveedores
PROVEEDORES_WHATSAPP_PORT=5002
PROVEEDORES_INSTANCE_NAME=TinkuBot Proveedores
PROVEEDORES_INSTANCE_ID=bot-proveedores
PROVEEDORES_WHATSAPP_NUMBER=+593998823054

# Configuración de servidor
SERVER_HOST=0.0.0.0

# ai-clientes
CLIENTES_SERVER_PORT=8001
USE_AI_EXTRACTION=true

# ai-proveedores
PROVEEDORES_SERVER_PORT=8002
AI_PROVEEDORES_INTERNAL_TOKEN=

# orchestrator-service
ORCHESTRATOR_SERVER_PORT=5008

SERVER_DOMAIN=localhost
UVICORN_RELOAD=false
FEEDBACK_DELAY_SECONDS=300
TASK_POLL_INTERVAL_SECONDS=60
FLOW_TTL_SECONDS=86400
REQUEST_TIMEOUT=30
IDLE_TIMEOUT=300

# Logging
LOG_LEVEL=INFO

# WA-Gateway - Webhook Configuration
WA_GATEWAY_PORT=7000
AI_CLIENTES_URL=http://ai-clientes:8001
AI_PROVEEDORES_URL=http://ai-proveedores:8002
WEBHOOK_ENDPOINT=/handle-whatsapp-message
WEBHOOK_TIMEOUT_MS=10000
WEBHOOK_RETRY_ATTEMPTS=3
