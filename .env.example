# Variables de entorno para el orquestador Docker Compose

# Configuración SUPABASE
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_BACKEND_API_KEY=your-supabase-backend-key
SUPABASE_SERVICE_KEY=your-supabase-service-key
SUPABASE_BUCKET_NAME=wa_sessions
SUPABASE_BUCKET_URL=https://your-project.supabase.co/storage/v1/s3
SUPABASE_BUCKET_REGION=us-east-2

# Configuración de base de datos para servicios Rust
DATABASE_URL=postgresql://user:password@host:5432/postgres
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5
DB_CONNECT_TIMEOUT=30
DB_IDLE_TIMEOUT=600

# Configuración de Redis (Upstash)
REDIS_URL=redis://localhost:6379

# Configuración de OpenAI
OPENAI_API_KEY=your-openai-api-key

# Configuración de WhatsApp
WHATSAPP_HEADLESS=true
WHATSAPP_WINDOW_SIZE=1920,1080

# Configuración de AI
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=150
OPENAI_TEMPERATURE=0.7
AI_PROV_SEND_DIRECT=false
AVAILABILITY_TIMEOUT_SECONDS=60
AVAILABILITY_ACCEPT_GRACE_SECONDS=60

# Configuración de servicios para WhatsApp Services (Docker)
# WhatsApp Service Clientes
AI_SERVICE_CLIENTES_URL=http://ai-clientes:8001

# WhatsApp Service Proveedores
PROVEEDORES_AI_SERVICE_URL=http://ai-proveedores:8002

# URLs directas de los servicios de WhatsApp
WHATSAPP_CLIENTES_URL=http://wa-clientes:5001
WHATSAPP_PROVEEDORES_URL=http://wa-proveedores:5002

# Configuración de puertos (esquema actualizado)
# Frontend y Dashboards (Node.js)
FRONTEND_SERVICE_PORT=5000

# Servicios WhatsApp (Node.js)
WHATSAPP_CLIENTES_PORT=5001
WHATSAPP_PROVEEDORES_PORT=5002

# Servicios AI (Python)
AI_SERVICE_CLIENTES_PORT=8001
AI_SERVICE_PROVEEDORES_PORT=8002
SEARCH_TOKEN_PORT=8000
SESSION_SERVICE_PORT=8004
API_GATEWAY_PORT=8003
MAX_SEARCH_RESULTS=20
DEFAULT_SEARCH_LIMIT=10
SEARCH_TIMEOUT_MS=5000
CACHE_TTL_SECONDS=300
SEARCH_API_HOST=0.0.0.0
SEARCH_API_PREFIX=/api/v1
SEARCH_METRICS_ENABLED=true
SEARCH_METRICS_PORT=9091

# Configuración Bot Clientes
CLIENTES_WHATSAPP_PORT=5001
CLIENTES_INSTANCE_NAME=TinkuBot Clientes
CLIENTES_INSTANCE_ID=bot-clientes
CLIENTES_WHATSAPP_NUMBER=+593998823053

# Configuración Bot Proveedores
PROVEEDORES_WHATSAPP_PORT=5002
PROVEEDORES_INSTANCE_NAME=TinkuBot Proveedores
PROVEEDORES_INSTANCE_ID=bot-proveedores
PROVEEDORES_WHATSAPP_NUMBER=+593998823054

# Configuración de servidor
SERVER_HOST=0.0.0.0

# ai-clientes
CLIENTES_SERVER_PORT=8001

# ai-proveedores
PROVEEDORES_SERVER_PORT=8002

# orchestrator-service
ORCHESTRATOR_SERVER_PORT=5008

SERVER_DOMAIN=localhost
UVICORN_RELOAD=false
FEEDBACK_DELAY_SECONDS=300
TASK_POLL_INTERVAL_SECONDS=60
FLOW_TTL_SECONDS=3600
REQUEST_TIMEOUT=30
IDLE_TIMEOUT=300

# Logging
LOG_LEVEL=INFO

# ========== MQTT MIGRATION FASE 1 ==========
# Activar MQTT para notificaciones WhatsApp (true/false)
# Por defecto false para backward compatibility
USE_MQTT_WHATSAPP=false

# Configuración MQTT Broker
MQTT_HOST=mosquitto
MQTT_PORT=1883
MQTT_USUARIO=
MQTT_PASSWORD=

# Topics MQTT para mensajería WhatsApp
MQTT_WHATSAP_TOPIC=whatsapp/clientes/send
MQTT_WHATSAP_TOPIC_PROVEEDORES=whatsapp/proveedores/send

# Topics MQTT para disponibilidad (ya existentes)
MQTT_TEMA_SOLICITUD=av-proveedores/solicitud
MQTT_TEMA_RESPUESTA=av-proveedores/respuesta

# Configuración QoS MQTT: 0=at most once, 1=at least once, 2=exactly once
MQTT_QOS=1

# Timeout para publicaciones MQTT (segundos)
MQTT_TIMEOUT=5
